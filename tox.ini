[tox]
envlist = py{38,39,310,311,312},lint,type,docs
skipsdist = False

[testenv]
description = Run unit tests
deps = 
    -r requirements.txt
    pytest>=7.0
    pytest-asyncio>=0.21.0
    pytest-cov>=4.0
commands = 
    pytest tests/ -v {posargs}

[testenv:py{38,39,310,311,312}-cov]
description = Run tests with coverage
commands = 
    pytest tests/ -v --cov=ciris_manager --cov-report=term-missing --cov-report=html

[testenv:lint]
description = Run linters
deps = 
    black>=23.0
    ruff>=0.1.0
commands = 
    black --check ciris_manager/ tests/
    ruff check ciris_manager/ tests/

[testenv:format]
description = Format code
deps = 
    black>=23.0
    ruff>=0.1.0
commands = 
    black ciris_manager/ tests/
    ruff check --fix ciris_manager/ tests/

[testenv:type]
description = Run type checking
deps = 
    mypy>=1.0
    types-PyYAML
    types-requests
commands = 
    mypy ciris_manager/

[testenv:docs]
description = Build documentation (placeholder)
commands = 
    echo "Documentation building not yet configured"

[testenv:dev]
description = Development environment with all tools
deps = 
    -e .[dev]
commands = 
    python -c "print('Development environment ready!')"